# 課題2

## Table of Contents
<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->



<!-- END doctoc generated TOC please keep comment here to allow auto update -->

## クイズ1

- Googleが作成したXSSについて学べるサイトとして、「[XSS Game](https://xss-game.appspot.com/)」があります。これのレベル2までをクリアしてください。

<details><summary>想定回答</summary>

- レベル1の回答例
  - `<script>alert("cracked!")</script>`をフォームに入力して送信する

- レベル2の回答例
  - `<img src="test" onerror="alert('cracked')">`をフォームに入力して送信する
    - `oneerror`：imageの読み込みにエラーが起こった場合にimage要素に送られる

- 参考
  - [imageのoneerror](https://developer.mozilla.org/ja/docs/Archive/Mozilla/XUL/image#a-onerror)

</details>

## クイズ2

- XSS-Gameのレベル2では、レベル1のように`<script>`タグをフォームに入力するだけではクリアできません。それはなぜでしょうか。（任意ですがレベル6までありますので、ぜひその先もやってみてください！）

- ヒント：`index.html`の32行目に注目

<details><summary>想定回答</summary>

- `index.html`の32行目で結合したHTMLを`innerHTML`プロパティに渡しているが、このプロパティでは`<script>`タグは実行されない仕様になっているため
- ただし、`<img>`タグによるJavaScriptの実行は許可されているため、クイズ1の回答のような攻撃が可能。
- 以下MDNより引用
  - > このため、プレーンテキストを挿入するときには innerHTML を使用せず、代わりに Node.textContent を使用することをお勧めします。これは渡されたコンテンツを HTML として解釈するのではなく、生テキストとして挿入します。

- 参考
  - [Google XSS Game - Solving Level 2](http://offsec-sureshatt.blogspot.com/2017/04/google-xss-game-solving-level-2.html)
  - [element.innerHTMLのセキュリティの考慮事項](https://developer.mozilla.org/ja/docs/Web/API/Element/innerHTML#security_considerations)→これがほぼ答えです

<details>